# scanner
使用python实现端口扫描
端口扫描工具：是指用于探测服务器或主机开放端口情况的工具，常常被计算机管理人员用于确认安全策略，同时被攻击者用于识别目标主机上可以运作的网络服务。 端口扫描的定义是客户端向一定范围内的服务器端口发送对应的请求，以此确定可使用的端口。但是它也是网络攻击者探测目标主机服务，以利用该服务的已知漏洞的重要手段。

首先我们实现一个简单的端口扫描程序，在这个扫描程序中我们先理解单线程的方式依次测试连接端口列表。可以把此过程分为以下三个部分： 1.读取端口以及目标服务器。 将目标服务器和端口范围作为参数传给程序（利用sys） 2.测试TCP端口连接。 进入到一个循环，在这个循环中依次对端口范围内的端口进行连接测试。 连接测试的方法是： 1.创建socket socket.AF_INTE参数表示IPv4 socket，socket.SOCK_STREAM参数表示TCP socket。这样我们就初始化了一个使用IPv4，TCP协议的socket。 2.调用connect_ex（）函数 我们根据socket.connect_ex()方法连接目标地址，通过该方法返回的状态代码来判断连接是否成功。该方法返回0代表连接成功。 3.关闭连接 进入循环开始连接： 3.输出开发端口结果。 单线程扫描虽然逻辑简单，但无疑是非常低效的。因为在扫描过程中要进行大量的数据包的发送和接受，所以这是一个I/O密集型的操作。如果只是用单线程进行扫描的话，程序会在等待回复的过程中浪费大量的时间。因此多线程的操作是很有必要的。这里，一个很自然的思路就是为每一个端口单独开一个线程进行扫描。 改进的方法如下： 1.把TCP连接测试封装进函数。 2.每次循环都创建一个线程来执行1中的扫描函数。 3.把开放端口输出步骤写入到1的测试函数中。 实现TCP测试函数需要注意print输出的时候需要加锁，如果不加锁可能会出现多个输出混合在一起的错误的状态，而锁需要在程序启动的时候创建，从而能让新建的线程共享这个锁：（当输出执行完以后要释放lock）
